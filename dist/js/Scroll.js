!function(){"use strict";class i{constructor(){this.pageContainerEl=document.querySelector("[data-scroll-container]"),this.headerEl=document.querySelector("header"),this.headerContainerEl=document.querySelector(".header__container"),this.headerMenuLinkElems=document.querySelectorAll(".header__menu-link"),this.firstEl=document.querySelector(".first"),this.sectionPinEl=document.querySelector("#section-pin"),this.pinWrapEl=document.querySelector(".pin-wrap"),this.mediaWrapVideoEl=document.querySelector(".media__wrap-video"),this.mediaVideoEl=document.querySelector(".media__video"),this.mediaWrapImgEl=document.querySelector(".media__wrap-img"),this.mediaImgEl=document.querySelector(".media__img"),this.videoLineSecondEl=document.querySelectorAll(".video-line")[1],this.videoWatchEl=document.querySelector(".video__watch"),this.videoWatchBtnEl=this.videoWatchEl.querySelector("button"),this.productGoEl=document.querySelector(".product__go"),this.productGoBtnEl=this.productGoEl.querySelector("button"),this.productLineSecondEl=document.querySelectorAll(".product-line")[1],this.leftPoint=0,this.pinWrapWidth=1400,this.pauseVideo=null,this.pauseImg=null,this.isBottomPositionSetVideo=!1,this.isBottomPositionSetImage=!1,this.isScrolledUpFromForm=!1,this.isPausedVideo=!1,this.isPausedImage=!1,this.isScrollingUp=!1,this.isMobileVersion=!0}init(){window.addEventListener("resize",()=>{document.querySelector(".media").style.height=window.innerHeight+"px"}),document.querySelector(".media").style.height=window.innerHeight+"px",this.initializeScroller(),this.initializeScrollTriggers(),this.setScrollUpdate(),this.setPinEffect(),this.setRefreshEvent()}initializeScroller(){this.scroller=new LocomotiveScroll({el:this.pageContainerEl,smooth:!0,multiplier:.3,mobile:{breakpoint:0,smooth:!0,direction:"vertical",multiplier:.1},tablet:{breakpoint:0,smooth:!0,direction:"vertical",multiplier:.1}})}initializeScrollTriggers(){gsap.registerPlugin(ScrollTrigger),ScrollTrigger.scrollerProxy(this.pageContainerEl,{scrollTop:i=>arguments.length?this.scroller.scrollTo(i,0,0):this.scroller.scroll.instance.scroll.y,getBoundingClientRect(){return{left:0,top:0,width:window.innerWidth,height:window.innerHeight}},pinType:this.pageContainerEl.style.transform?"transform":"fixed"})}setScrollUpdate(){this.scroller.on("scroll",ScrollTrigger.update),this.scroller.on("scroll",i=>{this.scrollY>i.scroll.y&&this.scrollY>this.pinWrapWidth&&!this.isScrolledUpFromForm&&this.onFormScrollUp(),this.checkMobileVersion(),this.scrollY=i.scroll.y,this.setBottomPositionOfVideo(),this.updatePositionProductLineSecond(),this.updateHeaderOnScroll(),this.rotateVideo(),this.manageVideoAnimation(),this.rotateImage(),this.manageImageAnimation()})}updatePositionProductLineSecond(){var i=this.pinWrapEl.getBoundingClientRect(),e=this.videoLineSecondEl.getBoundingClientRect();this.leftPoint=-i.left+e.left-this.pinWrapEl.offsetWidth,this.productLineSecondEl.style.transform=`translateX(${this.leftPoint}px)`}rotateVideo(){if(!this.isScrollingUp){var t=(window.innerHeight-this.mediaWrapVideoEl.offsetHeight)/2;let i=null,e=null;this.bottomDistanceVideo=window.innerHeight-this.mediaWrapVideoEl.getBoundingClientRect().bottom,this.isMobileVersion?(i=-7/(400+t),e=-t*i,this.mediaVideoRotate=+(e+i*this.bottomDistanceVideo).toFixed(1)):(i=-5/(485+t),e=-t*i),this.mediaVideoRotate=+(e+i*this.bottomDistanceVideo).toFixed(1),this.mediaVideoEl.style.transform=`rotate(${this.mediaVideoRotate}deg)`}}rotateImage(){var i=(window.innerHeight-this.mediaWrapImgEl.offsetHeight)/2;let e=null,t=null;this.bottomDistanceImage=window.innerHeight-this.mediaWrapImgEl.getBoundingClientRect().bottom,t=-i*(e=this.isMobileVersion?-7/(400+i):-5/(485+i)),this.mediaImgRotate=+(t+e*this.bottomDistanceImage).toFixed(1),this.mediaImgEl.style.transform=`rotate(${this.mediaImgRotate}deg)`}updateHeaderOnScroll(){this.scrollY<this.headerEl.offsetHeight?(this.headerContainerEl.style.transform="none",this.headerEl.style.top="0",this.headerEl.style.transition="none"):this.scrollY<this.firstEl.offsetHeight&&(this.headerEl.style.top=`-${this.headerEl.offsetHeight}px`,this.headerEl.style.transition="none")}manageVideoAnimation(){null!=this.pauseVideo&&this.pauseVideo<=Math.floor(this.scrollY)&&!this.isScrollingUp?(this.resumeVideoAnimation(),this.videoWatchEl.classList.add("is-hidden")):0==this.mediaVideoRotate?(this.isPausedVideo||(this.isMobileVersion?this.pauseVideo=Math.floor(this.scrollY)+200:this.pauseVideo=Math.floor(this.scrollY)+275,this.isPausedVideo=!0),this.stopVideoAnimation(),this.videoWatchBtnEl.style.opacity="1",this.videoWatchEl.classList.remove("is-hidden"),this.setBottomPositionOfImage()):0<this.mediaVideoRotate&&(this.resumeVideoAnimation(),this.videoWatchEl.classList.remove("is-hidden"),this.videoWatchBtnEl.style.opacity=""+(.96-.17*this.mediaVideoRotate))}manageImageAnimation(){this.pauseImg<=Math.floor(this.scrollY)+3&&this.pauseImg>=Math.floor(this.scrollY)||0<this.mediaImgRotate?(this.mediaWrapImgEl.classList.remove("is-paused"),this.isMobileVersion?this.mediaWrapImgEl.style.bottom=`-${this.videoLineSecondEl.offsetWidth-this.pauseVideo+1e3}px`:this.mediaWrapImgEl.style.bottom=`-${2*(this.videoLineSecondEl.offsetWidth-this.pauseVideo)}px`,this.mediaImgEl.classList.remove("is-paused"),this.mediaWrapImgEl.classList.contains("is-paused")||(this.productGoEl.classList.remove("is-hidden"),this.productGoBtnEl.style.opacity=""+(.96-.17*this.mediaImgRotate))):this.mediaImgRotate<=.3&&-.3<=this.mediaImgRotate&&!this.isPausedImage&&(this.pauseImg||(this.pauseImg=Math.floor(this.scrollY),this.isPausedVideo=!0),this.stopImageAnimation(),this.productGoBtnEl.style.opacity="1",this.productGoEl.classList.remove("is-hidden"))}setBottomPositionOfImage(){this.isBottomPositionSetImage||(this.isMobileVersion?this.mediaWrapImgEl.style.bottom=`-${this.videoLineSecondEl.offsetWidth-this.pauseVideo+1e3}px`:this.mediaWrapImgEl.style.bottom=`-${2*(this.videoLineSecondEl.offsetWidth-this.pauseVideo)}px`,this.isBottomPositionSetImage=!0)}setBottomPositionOfVideo(){this.isBottomPositionSetVideo||(this.mediaWrapVideoEl.style.bottom="0",this.isBottomPositionSetVideo=!0)}stopVideoAnimation(){this.mediaVideoEl.classList.add("is-paused"),this.mediaWrapVideoEl.classList.add("is-paused"),this.mediaWrapVideoEl.style.transition="none"}stopImageAnimation(){this.mediaImgEl.classList.add("is-paused"),this.mediaWrapImgEl.classList.add("is-paused"),this.mediaWrapImgEl.style.transition="none",this.mediaWrapImgEl.style.bottom="0"}resumeVideoAnimation(){this.mediaVideoEl.classList.remove("is-paused"),this.mediaWrapVideoEl.classList.remove("is-paused"),this.mediaWrapVideoEl.style.transition="transform .2s linear"}checkMobileVersion(){768<=window.innerWidth&&(this.isMobileVersion=!1)}onFormScrollUp(){this.isScrolledUpFromForm=!0,this.isScrollingUp=!0,this.headerContainerEl.style.transform="none",this.headerEl.style.top="0",this.headerEl.style.transition="none",this.scroller.scrollTo(this.firstEl.nextElementSibling,{duration:1e3,offset:10,callback:()=>{this.mediaWrapImgEl.style.bottom="",this.headerEl.classList.add("is-fixed")}}),setTimeout(()=>{this.isScrollingUp=!1},1800),this.mediaVideoEl.style.transform="rotate(0)",this.videoWatchEl.classList.remove("is-hidden"),this.mediaImgEl.classList.remove("is-paused"),this.mediaImgEl.classList.remove("rotate-15"),this.mediaWrapImgEl.classList.remove("is-paused"),this.isMobileVersion?this.mediaWrapImgEl.style.bottom=`-${this.videoLineSecondEl.offsetWidth-this.pauseVideo+1e3}px`:this.mediaWrapImgEl.style.bottom=`-${2*(this.videoLineSecondEl.offsetWidth-this.pauseVideo)}px`}resumeImageAnimation(){this.productGoEl.classList.add("is-hidden"),this.mediaWrapImgEl.style.bottom="1000px",this.headerEl.classList.remove("is-fixed"),this.mediaWrapImgEl.style.transition="bottom 1s linear",this.mediaImgEl.style.transition="transform 1s linear",this.mediaImgEl.classList.remove("is-paused"),this.mediaImgEl.classList.add("rotate-15"),this.mediaImgEl.style.transform=`rotate(${this.mediaImgRotate}deg)`}setPinEffect(){this.horizontalScrollLength=0;var i=()=>{this.headerEl.classList.add("is-fixed"),this.headerEl.style.top="0",this.headerEl.style.transition="top .2s ease-in-out",this.headerMenuLinkElems.forEach(i=>{i.classList.remove("transition-effect")})};gsap.to(".pin-wrap",{scrollTrigger:{scroller:this.pageContainerEl,scrub:!0,trigger:"#section-pin",pin:!0,start:"top top",end:this.pinWrapWidth,onEnter:i,onUpdate:()=>{this.headerMenuLinkElems.forEach(i=>{i.classList.add("transition-effect")})},onLeave:()=>{this.isPausedImage=!0,this.headerEl.classList.remove("is-fixed"),this.resumeImageAnimation(),this.scrollToNextSection(),this.sectionPinEl.style.opacity="0"},onEnterBack:i,onLeaveBack:()=>{this.headerEl.classList.remove("is-fixed")}},x:-this.horizontalScrollLength,ease:"none"})}scrollToNextSection(){var i=this.sectionPinEl.parentElement.nextElementSibling;i&&(i=i.offsetTop,this.scroller.scrollTo(i,{duration:800}),setTimeout(()=>{this.sectionPinEl.style.opacity="1",this.isScrolledUpFromForm=!1,this.isPausedImage=!1,this.mediaImgEl.style.transition="none"},800))}setRefreshEvent(){ScrollTrigger.addEventListener("refresh",()=>this.scroller.update()),ScrollTrigger.refresh()}}window.addEventListener("load",()=>{(new i).init()})}();